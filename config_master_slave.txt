sudo apt-get install mysql-server mysql-client

########### MASTER ##############
sudo vi /etc/mysql/my.cnf

	bind-address  		= 172.21.99.4 [master ip]
	server-id     		= 1
	log_bin       		= /var/log/mysql/mysql-bin.log
	binlog_do_db  		= invertnew [for several add multiple lines]

sudo service mysql restart
mysql -u root -p
	GRANT REPLICATION SLAVE ON *.* TO 'slave_user'@'%' IDENTIFIED BY 'b4nky0u';
	FLUSH PRIVILEGES;
	USE invertnew;
	FLUSH TABLES WITH READ LOCK; /* just if we'd like to avoid new entries */
		sample error trying to insert new data: Can't execute the query because you have a conflicting read lock
	SHOW MASTER STATUS; /* record the output numbers */ [mysql-bin.000001, 577]
mysqldump -u root -p --opt invertnew > invertnew.sql
mysql -u root -p
	USE invertnew;
	UNLOCK TABLES;
	QUIT;

######### SLAVE ###################
mysql -u root -p
	CREATE DATABASE invertnew;
	EXIT;
mysql -u root -p invertnew < invertnew.sql
sudo vim /etc/mysql/my.cnf
	server-id  		= 2
	relay-log               = /var/log/mysql/mysql-relay-bin.log [added inline]
	log_bin                 = /var/log/mysql/mysql-bin.log
	binlog_do_db            = invertnew 
sudo service mysql restart
mysql -u root -p
	CHANGE MASTER TO MASTER_HOST='172.21.99.4',MASTER_USER='slave_user', MASTER_PASSWORD='b4nky0u', MASTER_LOG_FILE='mysql-bin.000001', MASTER_LOG_POS=  577;
	START SLAVE;
	----- SET GLOBAL SQL_SLAVE_SKIP_COUNTER = 1; SLAVE START; /* optional: If there is an issue in connecting, you can try starting slave with a command to skip over it */

######### to resync ##############
mysql -u root -p
	START SLAVE;
